<!DOCTYPE html>
<html lang="en">

<head>
	<title>GoFeedMe Homepage</title>
	<meta charset="utf-8">
	<meta name="format-detection" content="telephone=no">
	<link rel="icon" href="../assets/images/GoFeedMe.PNG">
	<link rel="shortcut icon" href="../assets/images/GoFeedMe.PNG">
	<link rel="stylesheet" href="assets/css/form.css">
	<link rel="stylesheet" href="assets/css/thumbs.css">
	<link rel="stylesheet" href="assets/css/slider.css">
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	 crossorigin="anonymous">
	<script src="js/jquery.js"></script>
	<script src="js/jquery-migrate-1.2.1.js"></script>
	<script src="js/script.js"></script>
	<script src="js/superfish.js"></script>
	<script src="js/sForm.js"></script>
	<script src="js/jquery.ui.totop.js"></script>
	<script src="js/jquery.equalheights.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="js/jquery.iosslider.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
	 crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
	 crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
	 crossorigin="anonymous"></script>
	<script>
		$(document).ready(function () {
			$().UItoTop({ easingType: 'easeOutQuart' });
		});
	</script>

</head>

<body class="page1" id="top">
	<!--==============================header=================================-->
	<header>
		<div class="container_12">
			<div class="grid_12">
				<h1>
					<a href="/">

						<img id="image-logo" src="../assets/images/GoFeedMe.PNG" alt="GoFeedMe logo">
					</a>
				</h1>
				<div class="menu_block ">
					<a href="#" class="bb-trigger donate" data-toggle="modal" data-target="#myModal">LOGIN</a>
					<div class="clear"></div>
					<nav class="horizontal-nav full-width horizontalNav-notprocessed">
						<ul class="sf-menu">
							<li class="current">
								<a href="/">Home</a>
							</li>
							<li>
								<a href="/volunteer">Volunteer</a>
							</li>
							<li>
								<a href="/meals">Meal Request</a>
							</li>

						</ul>
					</nav>
					<div class="clear"></div>
				</div>
			</div>
		</div>
	</header>
	<div class="fluidHeight container_12">
		<div class="sliderContainer">
			<div class="iosSlider">
				<div class="slider">
					<div class="item item1">
						<div class="inner">

						</div>
					</div>
					<div class="item item2">
						<div class="inner">

						</div>
					</div>
					<div class="item item3">
						<div class="inner">

						</div>
					</div>
				</div>
				<div class="slideSelectors">
					<div class="item selected"></div>
					<div class="item"></div>
					<div class="item"></div>
				</div>
			</div>
		</div>
	</div>
	<!--==============================Content=================================-->
	<br>
	<div class="fluidHeight2 container_12">
		<!-- <div class="jumbotron jumbotron-fluid"> -->
			<div class="container">
				<h1 class="display-4" id="about">
					<strong>About Us</strong>
				</h1>
				<br>
				<p class="lead">Our mission is to bring healthy and nutritious meals to not only elderly residents, but also to low-income households
					with young children. GoFeedMe program brings home-cooked meals provided by our volunteer chefs. Anyone in need can sign-up,
					our volunteers are carefully screened with background checks, insured and we are greatful for the time they donate.
					Our organization also requires that the chefs utilize local farmers markets for local and organic produce in order to
					support our local communities. As a part of the sign-up program we do match our volunteers with local markets in their
					area. </p>
				<p> People who sign-up for our meals delivery are guaranteed healthy meals - breakfast, lunch and/or dinner along with our
					ability to accommodate special dietary requirements and allergies.
				</p>
				<p>16% of Mecklenburg County's population is currently food insecure. That translates to over 162,000 people in our area.
					Overall 14.5% of this country's population is not receiving the proper nutritious meals. LET'S GET RID OF HUNGER - ONE
					MEAL AT A TIME!
				</p>
			</div>
		<!-- </div> -->
		<hr>

		<div class="content">

			<div class="container_12">
				<div class="grid_6">
					<h2>Cook a Meal</h2>
					<img src="assets/images/volunteer small.jpg" alt="" class="img_inner fleft">
					<div class="extra_wrapper">
						<p class="col2">Join us and help feed people in need </p>
						<a href="/volunteer" class="btn">Volunteer</a>
					</div>
					<div class="clear"></div>
				</div>
				<div class="grid_5 prefix_1">
					<h2>Request a Meal</h2>
					<img src="assets/images/meal.jpg" alt="" class="img_inner fleft">
					<div class="rel1">
						<p>Register here for meal delivery</p>
					</div>
					<a href="/meals" class="btn">Request a Meal</a>
				</div>
			</div>
			<div class="hor"></div>
			<div class="container_12">
				<div class="grid_3">

				</div>
				<div class="grid_9">
					<h2>
						<strong>Leave Us a Message</strong>
					</h2>

					<form id="form">
						<div class="success_wrapper">
							<div class="success-message">
								<strong>Leave Us a Message</strong>
							</div>
						</div>
						<label class="name">
							<input type="text" placeholder="Name:" data-constraints="@Required @JustLetters" />
							<span class="empty-message">*This field is required.</span>
							<span class="error-message">*This is not a valid name.</span>
						</label>
						<label class="email">
							<input type="text" placeholder="Email:" data-constraints="@Required @Email" />
							<span class="empty-message">*This field is required.</span>
							<span class="error-message">*This is not a valid email.</span>
						</label>

						<label class="message">
							<textarea placeholder="Message:" data-constraints='@Required @Length(min=20,max=999999)'></textarea>
							<span class="empty-message">*This field is required.</span>
							<span class="error-message">*The message is too short.</span>
						</label>
						<div>
							<div class="clear"></div>
							<div class="btns">
								<a href="#" data-type="reset" class="btn">Clear</a>
								<a href="#" data-type="submit" class="btn">Send</a>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- <div class="bottom_block">
		<div class="container_12">
			<div class="grid_4">
			</div>
			<div class="grid_5 prefix_3">
				<h3>Stay Connected</h3>
				<div class="text1">Follow Us on Social Media Accounts </div>

				<div class="socials">
					<a href="#">
						<div class="fa fa-twitter"></div>
					</a>
					<a href="#">
						<div class="fa fa-facebook"></div>
					</a>
					<a href="#">
						<div class="fa fa-pinterest-square"></div>
					</a>
					<a href="#">
						<div class="fa fa-google-plus"></div>
					</a>
					<a href="#">
						<div class="fa fa-instagram"></div>
					</a>

				</div>
			</div>
		</div>
	</div> -->
	<!--==============================footer=================================-->
	<footer>

	</footer>

	<!--==============================modal=================================-->
	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
					<form id="formLogin">
							<div class="form-group">
								<label>&nbsp;&nbsp;E-mail </label>
								<input id="textEmail" class="form-control" type="email" placeholder="Your email address">
								<label id="invalidEmail" style="color:red; font-size: 12px; display: none;">
									<b>Please enter a valid email.</b>
								</label>
							</div>
							<div class="form-group">
								<label>&nbsp;Password</label>
								<input id="textPassword" class="form-control" type="password" placeholder="Password must be between 6 and 14 digits long and include at least one numeric digit.">
								<div>
									<label id="invalidPassword" style="display: none;">
										<b>Password must be between 6 and 14 digits long and include at least one numeric digit.</b>
									</label>
								</div>
			
								<button id="btnLogin" class="btn btn-light" type="button">Log in</button>
								<button id="btnSignUp" class="btn btn-light" type="button">Sign up</button>
								<button id="btnLogout" class="btn btn-light" type="button" style="display: none;">Logout</button>
							</div>
						</form>
			</div>

		</div>
	</div>


	<script src="js/jquery.hoverdir.js"></script>
	<script>
		$(document).ready(function () {
			$('.iosSlider').iosSlider({
				desktopClickDrag: true,
				snapToChildren: true,
				navSlideSelector: '.sliderContainer .slideSelectors .item',
				onSlideComplete: slideComplete,
				onSliderLoaded: sliderLoaded,
				onSlideChange: slideChange,
				scrollbar: false,
				autoSlide: true,
				autoSlideTimer: 3300,
				infiniteSlider: true
			});
		});
		function slideChange(args) {
			$('.sliderContainer .slideSelectors .item').removeClass('selected');
			$('.sliderContainer .slideSelectors .item:eq(' + (args.currentSlideNumber - 1) + ')').addClass('selected');
		}
		function slideComplete(args) {
			if (!args.slideChanged) return false;
			$(args.sliderObject).find('.text1, .text2').attr('style', '');
			$(args.currentSlideObject).find('.text1').animate({
				right: '100px',
				opacity: '0.72'
			}, 400, 'easeOutQuint');
			$(args.currentSlideObject).find('.text2').delay(200).animate({
				right: '70px',
				opacity: '0.72'
			}, 400, 'easeOutQuint');
		}
		function sliderLoaded(args) {
			$(args.sliderObject).find('.text1, .text2').attr('style', '');
			$(args.currentSlideObject).find('.text1').animate({
				right: '100px',
				opacity: '0.72'
			}, 400, 'easeOutQuint');
			$(args.currentSlideObject).find('.text2').delay(200).animate({
				right: '70px',
				opacity: '0.72'
			}, 400, 'easeOutQuint');
			slideChange(args);
		}
		$(function () {
			$(' #da-thumbs > li ').each(function () { $(this).hoverdir(); });
		});
	</script>
</body>

<script src="https://www.gstatic.com/firebasejs/5.5.4/firebase.js"></script>
<script type="text/javascript">
	// Initialize Firebase
	

    // FIXME: Hide api keys!!!!!
    var config = {
        apiKey: "AIzaSyAby5-flRUZH79bi_fxcUy_RlIi0MCm4zY",
        authDomain: "go-feed-me-project-2.firebaseapp.com",
        databaseURL: "https://go-feed-me-project-2.firebaseio.com",
        projectId: "go-feed-me-project-2",
        storageBucket: "go-feed-me-project-2.appspot.com",
        messagingSenderId: "771848633863"
    };
    firebase.initializeApp(config);

    // Set firebase auth state presistance 

    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION)
        .then(function () {
            // Existing and future Auth states are now persisted in the current
            // session only. Closing the window would clear any existing state even
            // if a user forgets to sign out.
            // ...
            // New sign-in will be persisted with session persistence.
            return firebase.auth().signInWithEmailAndPassword(email, password);
        })
        .catch(function (error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
        });

    // Get elements

    const textEmail = document.getElementById("textEmail");
    const textPassword = document.getElementById("textPassword");
    const btnLogin = document.getElementById("btnLogin");
    const btnSignUp = document.getElementById("btnSignUp");
    const btnLogout = document.getElementById("btnLogout");

    // Add email vailidation

    document.getElementById("textEmail").addEventListener("focusout", emailValidate);

    function emailValidate() {
        const invalidEmail = document.getElementById("invalidEmail");

        var pattern = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;

        if (pattern.test(textEmail.value) && textEmail.value !== "") {
            console.log("email validated");
            invalidEmail.setAttribute("style", "display: none");
            return true;
        } else {
            console.log("email not valid");
            invalidEmail.removeAttribute("style", "display: none");
            invalidEmail.setAttribute("style", "color:red; font-size: 12px;");
            return false;
        }
    };

    // Add password validadtion

    document.getElementById("textPassword").addEventListener("focusout", passwordValidate);

    function passwordValidate() {
        const invalidPassword = document.getElementById("invalidPassword");

        var pattern = /^(?=.*\d).{6,14}$/;

        if (pattern.test(textPassword.value) && textPassword.value !== "") {
            console.log("password validated");
            invalidPassword.setAttribute("style", "display: none");
            return true;
        } else {
            console.log("password not valid");
            invalidPassword.removeAttribute("style", "display: none");
            invalidPassword.setAttribute("style", "color:red; font-size: 12px;");
            return false;
        }
    };

    // Add log in event
    // TODO: let user know if they have successfully logged in or need to sign up 
    btnLogin.addEventListener("click", e => {
        // Get email and pass 
        const email = textEmail.value;
        const pass = textPassword.value;
        const auth = firebase.auth();
        // Log in 
        if (emailValidate() && passwordValidate()) {
            const promise = auth.signInWithEmailAndPassword(email, pass);

            promise.catch(e => console.log(e.massage));

            document.getElementById("formLogin").reset();
        }
    });

    // Add sign up event 
    // TODO: let user know they have successfully signed up  
    btnSignUp.addEventListener("click", e => {
        const email = textEmail.value;
        const pass = textPassword.value;
        const auth = firebase.auth();
        // Sign up
        if (emailValidate() && passwordValidate()) {
            const promise = auth.createUserWithEmailAndPassword(email, pass);

            promise.catch(e => console.log(e.massage));

            document.getElementById("formLogin").reset();
        }
    });

    // Add logout event 

    btnLogout.addEventListener("click", e => {
        firebase.auth().signOut();
        document.getElementById("formLogin").reset();
    })

    // Add/remove logout option

    firebase.auth().onAuthStateChanged(firebaseUser => {
        if (firebaseUser) {
            console.log(firebaseUser);
            btnLogout.removeAttribute("style");
            // window.location = "/home"
        } else {
            console.log("Not logged in");
            btnLogout.setAttribute("style", "display: none;");
            // window.location = "/"
        }
    });


</script>

</html>